var E=Object.defineProperty;var B=(h,t,e)=>t in h?E(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var r=(h,t,e)=>(B(h,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=e(s);fetch(s.href,l)}})();class y{constructor(t,e,i,s){r(this,"cellSize");r(this,"strokeWidth");r(this,"rows");r(this,"columns");r(this,"done");r(this,"current");r(this,"grid");r(this,"stack");this.cellSize=t,this.strokeWidth=e,this.rows=i,this.columns=s,this.done=!1,this.current=new v(0,0,[],0,0),this.grid=[],this.stack=[]}setup(){for(let i=0;i<this.rows;i++){let s=[];for(let l=0;l<this.columns;l++){const n=new v(i,l,this.grid,this.cellSize,this.strokeWidth);s.push(n)}this.grid.push(s)}a.width=this.cellSize*this.columns+this.strokeWidth,a.height=this.cellSize*this.rows+this.strokeWidth,a.style.background=d.bg;const t=Math.floor(Math.random()*this.rows),e=Math.floor(Math.random()*this.columns);this.current=this.grid[t][e],this.updateGrid()}updateGrid(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++){let i=this.grid;i[t][e].revisited?i[t][e].highlight(d.revisited):i[t][e].visited&&i[t][e]!==this.current&&i[t][e].highlight(d.visited),i[t][e].show()}}highlightNeighbours(t){t.forEach(e=>{e.highlight(d.neighbour)})}draw(){a.width=this.cellSize*this.columns+this.strokeWidth,a.height=this.cellSize*this.rows+this.strokeWidth,a.style.background=d.bg,this.current.highlight(d.current),this.current.visited=!0;let t=this.current.checkNeighbours();if(this.highlightNeighbours(t),this.updateGrid(),t.length>0){let e=Math.floor(Math.random()*t.length),i=t[e];this.current.removeWalls(this.current,i),this.stack.push(this.current),this.current=i}else if(this.stack.length>0){this.current.revisited=!0;let e=this.stack.pop();this.current=e}else this.done=!0,console.log(this.done)}}class v{constructor(t,e,i,s,l){r(this,"rowNum");r(this,"colNum");r(this,"parentGrid");r(this,"cellSize");r(this,"strokeWidth");r(this,"visited");r(this,"revisited");r(this,"walls");this.rowNum=t,this.colNum=e,this.parentGrid=i,this.cellSize=s,this.strokeWidth=l,this.visited=!1,this.revisited=!1,this.walls={top:!0,right:!0,bottom:!0,left:!0}}checkNeighbours(){let t=this.parentGrid,e=[],i=this.rowNum!==0?t[this.rowNum-1][this.colNum]:void 0,s=this.colNum!==t[0].length-1?t[this.rowNum][this.colNum+1]:void 0,l=this.rowNum!==t.length-1?t[this.rowNum+1][this.colNum]:void 0,n=this.colNum!==0?t[this.rowNum][this.colNum-1]:void 0;return i&&!i.visited&&e.push(i),s&&!s.visited&&e.push(s),l&&!l.visited&&e.push(l),n&&!n.visited&&e.push(n),e}drawTopWall(t,e,i){o.beginPath(),o.moveTo(t-this.strokeWidth/2,e),o.lineTo(t+i+this.strokeWidth/2,e),o.stroke()}drawRightWall(t,e,i){o.beginPath(),o.moveTo(t+i,e-this.strokeWidth/2),o.lineTo(t+i,e+i+this.strokeWidth/2),o.stroke()}drawBottomWall(t,e,i){o.beginPath(),o.moveTo(t-this.strokeWidth/2,e+i),o.lineTo(t+i+this.strokeWidth/2,e+i),o.stroke()}drawLeftWall(t,e,i){o.beginPath(),o.moveTo(t,e-this.strokeWidth/2),o.lineTo(t,e+i+this.strokeWidth/2),o.stroke()}highlight(t){let e=this.colNum*this.cellSize,i=this.rowNum*this.cellSize;o.fillStyle=t,o.fillRect(e,i,this.cellSize,this.cellSize)}removeWalls(t,e){let i=t.colNum-e.colNum;i==1?(t.walls.left=!1,e.walls.right=!1):i==-1&&(t.walls.right=!1,e.walls.left=!1);let s=t.rowNum-e.rowNum;s==1?(t.walls.top=!1,e.walls.bottom=!1):s==-1&&(t.walls.bottom=!1,e.walls.top=!1)}show(){let t=this.colNum*this.cellSize+this.strokeWidth/2,e=this.rowNum*this.cellSize+this.strokeWidth/2;o.strokeStyle=d.wall,o.lineWidth=this.strokeWidth,this.walls.top&&this.drawTopWall(t,e,this.cellSize),this.walls.right&&this.drawRightWall(t,e,this.cellSize),this.walls.bottom&&this.drawBottomWall(t,e,this.cellSize),this.walls.left&&this.drawLeftWall(t,e,this.cellSize)}}const u=h=>getComputedStyle(document.documentElement).getPropertyValue("--"+h),d={bg:u("bg"),current:u("currentCell"),neighbour:u("neighbourCell"),visited:u("visitedCell"),revisited:u("revisitedCell"),wall:u("wall")},a=document.getElementById("maze"),o=a.getContext("2d"),b=document.getElementById("play-button"),f=b.querySelector(".img"),g=document.getElementById("next-button"),L=document.getElementById("new-maze-button"),T=document.getElementById("speed-input"),N=document.querySelector(".settings"),W=document.querySelector(".additional-settings"),S=[800,400,150,75,20];let w=2,p=S[w],k,m=!1,c=new y(40,2,13,20);c.setup();function z(){setTimeout(()=>{k=requestAnimationFrame(z),c.draw(),(c.done||!m)&&(window.cancelAnimationFrame(k),c.done&&(N.style.display="none",W.style.display="block",m=!1,f.src="/triangle.svg",g.disabled=!1))},p)}b.addEventListener("click",()=>{m?(m=!1,f.src="/triangle.svg",g.disabled=!1):(m=!0,z(),f.src="/rectangle.svg",g.disabled=!0)});g.addEventListener("click",()=>{c.draw()});L.addEventListener("click",()=>{c=new y(40,2,13,20),c.setup(),N.style.display="block",W.style.display="none"});T.addEventListener("change",h=>{w=h.target.value,p=S[w],console.log(p)});
